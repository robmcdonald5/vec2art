<!doctype html>
<html>
	<head>
		<title>Quick Import Test</title>
	</head>
	<body>
		<h1>Testing WASM Import</h1>
		<div id="result"></div>

		<script type="module">
			const resultDiv = document.getElementById('result');

			try {
				resultDiv.innerHTML += '<p>üîÑ Testing WASM import...</p>';

				// Try to import the WASM module
				const wasm = await import('/wasm/vectorize_wasm.js');
				resultDiv.innerHTML += '<p>‚úÖ WASM module imported successfully</p>';

				// Try to initialize
				await wasm.default();
				resultDiv.innerHTML += '<p>‚úÖ WASM module initialized successfully</p>';

				// Check for required functions
				const funcs = [
					'WasmVectorizer',
					'initThreadPool',
					'get_thread_count',
					'is_threading_supported'
				];
				funcs.forEach((func) => {
					if (typeof wasm[func] !== 'undefined') {
						resultDiv.innerHTML += `<p>‚úÖ Function ${func} available</p>`;
					} else {
						resultDiv.innerHTML += `<p>‚ùå Function ${func} missing</p>`;
					}
				});

				resultDiv.innerHTML += '<p>üéâ All imports successful!</p>';
			} catch (error) {
				resultDiv.innerHTML += `<p>‚ùå Error: ${error.message}</p>`;
				console.error('Import error:', error);
			}
		</script>
	</body>
</html>
